<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saviev - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º</title>
    
    <!-- Meta —Ç–µ–≥–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
    <!-- Tailwind CSS CDN - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <link rel="stylesheet" href="css/style.css?v=1754480168831">
    <link rel="stylesheet" href="css/focus2.css?v=1754480168831">
    
    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ –∫ —Ä–µ—Å—É—Ä—Å–∞–º (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function getVersion() {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º timestamp –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
            return Date.now().toString();
        }
        
        // –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–ß–ò–°–¢–ö–ê –ö–ï–®–ê –ü–†–ò –û–ë–ù–û–í–õ–ï–ù–ò–ò
        // –û—á–∏—â–∞–µ–º localStorage —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
        const currentVersion = '1754480168831';
        const lastVersion = localStorage.getItem('appVersion');
        
        if (lastVersion !== currentVersion) {
            console.log('üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–æ–≤, –æ—á–∏—â–∞–µ–º –∫–µ—à...');
            // –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            localStorage.removeItem('savievAppState');
            localStorage.setItem('appVersion', currentVersion);
            
            // –û—á–∏—â–∞–µ–º –∫–µ—à –º–æ–¥—É–ª–µ–π
            if (window.caches) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                });
            }
        }
    </script>
</head>
<body class="bg-gray-900 text-gray-200">
    <div id="globalLoader" style="position:fixed;z-index:9999;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:rgba(17,24,39,0.98);transition:opacity 0.3s;">
      <div class="loader-dots">
        <span></span><span></span><span></span><span></span>
      </div>
    </div>

    <!-- –°–¢–†–ê–ù–ò–¶–ê-–ó–ê–ì–†–£–ó–ß–ò–ö -->
    <div id="landingPage" class="page-transition active">
        <div class="flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4">
            <div class="text-center">
                <h1 class="text-6xl md:text-8xl font-black tracking-tighter bg-yellow-400 text-black px-6 py-2 rounded-lg">SAVIEV</h1>
                <p class="mt-4 text-xl md:text-2xl text-gray-400">–∫–µ—Ä—É–≤–∞–Ω–Ω—è –ª—é–¥—å–º–∏</p>
                <button id="startAppBtn" class="mt-12 px-8 py-4 bg-indigo-600 text-white font-semibold rounded-lg shadow-lg hover:bg-indigo-700 transition-transform transform hover:scale-105">
                    –†–æ–∑–ø–æ—á–∞—Ç–∏
                </button>
            </div>
        </div>
    </div>
    
    <!-- –°–¢–†–ê–ù–ò–¶–ê –ù–ê–°–¢–†–û–ô–ö–ò/–í–•–û–î–ê -->
    <div id="setupPage" class="page-transition">
        <div class="flex flex-col items-center justify-center min-h-screen bg-gray-900 p-4">
            <div id="authContainer" class="w-full max-w-sm hidden">
                <div class="bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold text-white text-center mb-6">–í—Ö—ñ–¥ –∞–±–æ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
                    <div class="space-y-4">
                        <input id="authEmail" type="email" placeholder="–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                        <input id="authPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å (–º—ñ–Ω. 6 —Å–∏–º–≤–æ–ª—ñ–≤)" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                    </div>
                    <div id="authError" class="text-red-400 text-sm mt-3 text-center h-4"></div>
                    <div class="mt-6 flex gap-4">
                        <button id="loginBtn" class="w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">–£–≤—ñ–π—Ç–∏</button>
                        <button id="registerBtn" class="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
                    </div>
                </div>
            </div>
            <div id="companySelectionContainer" class="hidden w-full max-w-2xl text-center">
                 <div class="flex justify-between items-center mb-4 w-full">
                    <h2 class="text-4xl font-bold text-white">–í–∏–±—ñ—Ä –∫–æ–º–ø–∞–Ω—ñ—ó</h2>
                    <button id="logoutBtnFromSetup" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm">–í–∏–π—Ç–∏</button>
                </div>
                <p class="mt-2 text-lg text-gray-400">–û–±–µ—Ä—ñ—Ç—å —ñ—Å–Ω—É—é—á—É –∫–æ–º–ø–∞–Ω—ñ—é –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É.</p>
                <div id="existingCompaniesSection" class="mt-8 bg-gray-800 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-white">–í–∞—à—ñ –∫–æ–º–ø–∞–Ω—ñ—ó</h3>
                    <ul id="companyList" class="mt-4 space-y-2 text-left max-h-60 overflow-y-auto"></ul>
                    <button id="showCreateCompanyFormBtn" class="mt-6 w-full px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –∫–æ–º–ø–∞–Ω—ñ—é</button>
                </div>
                <div id="createCompanyForm" class="hidden mt-8 bg-gray-800 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-white mb-4">–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–æ–º–ø–∞–Ω—ñ—ó</h3>
                    <div class="text-left space-y-4">
                        <input id="newCompanyName" type="text" placeholder="–ù–∞–∑–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—ó (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                        <input id="newCompanySphere" type="text" placeholder="–°—Ñ–µ—Ä–∞ –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                    </div>
                    <div class="items-center mt-4 px-4 py-3 gap-2 flex">
                        <button id="createCompanyBtn" class="w-full px-4 py-2 bg-green-600 text-white rounded-md shadow-sm hover:bg-green-700">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
                        <button id="cancelCreateCompanyBtn" class="w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                    </div>
                </div>
                <div id="companySetupSteps" class="hidden mt-8 bg-gray-800 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-white">–ö–æ–º–ø–∞–Ω—ñ—è: <span id="selectedCompanyName" class="text-indigo-400"></span></h3>
                    <p class="mt-2 text-gray-400">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É, —â–æ–± –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–æ–¥–∞—Ç–∫—É.</p>
                    <div class="mt-6 flex flex-col md:flex-row gap-4 justify-center">
                        <button id="goToAppBtn" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê (DASHBOARD) -->
    <div id="dashboardPage" class="page-transition">
        <div class="flex flex-col items-center justify-center min-h-screen bg-gray-900 p-4">
            <div class="w-full max-w-4xl text-center">
                <!-- –õ–æ–≥–æ—Ç–∏–ø –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
                <div class="mb-12">
                    <div class="text-6xl font-bold text-indigo-400 mb-4">SAVIEV</div>
                    <div class="text-2xl text-gray-300 mb-2">–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ —Å–≤—ñ—Ç—É —Ü–∏—Ñ—Ä!</div>
                    <div class="text-lg text-gray-400">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏</div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏ -->
                <div class="bg-gray-800 p-8 rounded-xl shadow-lg mb-8">
                    <div class="text-xl font-semibold text-white mb-4">
                        –ö–æ–º–ø–∞–Ω—ñ—è: <span id="dashboardCompanyName" class="text-indigo-400">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
                    </div>
                    <div class="text-gray-400 mb-6">
                        –û–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Å–∏—Å—Ç–µ–º–æ—é
                    </div>
                </div>

                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥—É–ª–µ–π -->
                <div id="dashboardModules" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="dashboardChangeCompanyBtn" class="px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors">
                        –ó–º—ñ–Ω–∏—Ç–∏ –∫–æ–º–ø–∞–Ω—ñ—é
                    </button>
                    <button id="dashboardLogoutBtn" class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                        –í–∏–π—Ç–∏ –∑ —Å–∏—Å—Ç–µ–º–∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø (—Å–∫—Ä—ã—Ç –¥–æ –≤—Ö–æ–¥–∞) -->
    <div id="appContainer" class="hidden p-4 md:p-8 ">
        <!-- –ù–û–í–ê–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
        <header class="flex justify-between items-center mb-8">
            <!-- –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞: –ö–æ–º–ø–∞–Ω—ñ—è —Ç–∞ –≥–∞–º–±—É—Ä–≥–µ—Ä -->
            <div class="flex items-center gap-4">
                <div class="text-sm">
                    <div class="text-gray-400">–ö–æ–º–ø–∞–Ω—ñ—è</div>
                    <div id="currentCompanyNameDisplay" class="font-semibold text-indigo-400 text-lg">–ù–µ –æ–±—Ä–∞–Ω–æ</div>
                </div>
                <button id="changeCompanyBtn" class="p-2 bg-gray-700 text-gray-200 rounded-md hover:bg-gray-600 text-sm">–ó–º—ñ–Ω–∏—Ç–∏</button>
                
                <!-- –ì–∞–º–±—É—Ä–≥–µ—Ä –º–µ–Ω—é -->
                <button id="hamburgerMenuBtn" class="p-3 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞: –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è -->
            <div class="flex items-center gap-4">
                <button onclick="forceUpdateNotifications()" class="px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700" title="–¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π">
                    üîÑ
                </button>
                <button id="notificationsBellBtn" class="p-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 relative" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                    </svg>
                    <span id="notificationIndicator" class="absolute top-0 right-0 block h-2.5 w-2.5 rounded-full ring-2 ring-gray-900 bg-red-500 hidden"></span>
                </button>
                <div id="notificationsDropdown" class="absolute top-16 right-4 sm:right-8 md:right-12 mt-2 w-72 bg-gray-700 rounded-md shadow-lg overflow-hidden z-20 hidden">
                    <div class="py-2 px-3 text-sm font-semibold text-white border-b border-gray-600">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</div>
                    <div id="notificationsListContainer" class="max-h-80 overflow-y-auto">
                        <!-- Notifications will be listed here -->
                        <p class="text-gray-400 text-center py-4">–ù–µ–º–∞—î –Ω–æ–≤–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å.</p>
                    </div>
                </div>

                <button id="settingsMenuBtn" class="bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 flex items-center gap-2 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z" /></svg>
                    <span>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</span>
                </button>
                 <button id="logoutBtn" class="p-2 bg-red-600/80 text-white rounded-md hover:bg-red-600" title="–í–∏–π—Ç–∏">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                </button>
            </div>
        </header>
        
        <!-- –ë–æ–∫–æ–≤–µ –º–µ–Ω—é (—Å–ø–æ—á–∞—Ç–∫—É –ø—Ä–∏—Ö–æ–≤–∞–Ω–µ) -->
        <div id="sidebarMenu" class="fixed top-0 left-0 h-full w-80 bg-gray-800 shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out z-50">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-white">–û–±—Ä–∞—Ç–∏ –º–æ–¥—É–ª—å</h2>
                    <button id="closeSidebarBtn" class="text-gray-400 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                
                <nav class="space-y-2">
                    <button data-target="appPage" class="nav-btn w-full px-4 py-3 text-white font-semibold rounded-md transition-colors bg-gray-700 hover:bg-indigo-600 active:bg-indigo-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>–¢–∞–±–µ–ª—å
                    </button>
                    <button data-target="massSalaryPage" class="nav-btn w-full px-4 py-3 text-gray-300 font-semibold rounded-md transition-colors bg-gray-700 hover:bg-blue-600 active:bg-blue-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3zm0 0V4m0 7v7m-7-7h14"/></svg>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ó–ü
                    </button>
                    <button data-target="salaryPage" class="nav-btn w-full px-4 py-3 text-gray-300 font-semibold rounded-md transition-colors bg-gray-700 hover:bg-purple-600 active:bg-purple-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m4 0h-1v4h-1m-4 0h1v-4h1m-4 0h1v4h1"/></svg>KPI (–û–¥–∏–Ω–æ—á–Ω–∏–π)
                    </button>
                    <button data-target="vacationsPage" class="nav-btn w-full px-4 py-3 text-gray-300 font-semibold rounded-md transition-colors bg-gray-700 hover:bg-green-600 active:bg-green-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>–í—ñ–¥–ø—É—Å—Ç–∫–∏
                    </button>
                    <button data-target="reportsPage" class="nav-btn w-full px-4 py-3 text-gray-300 font-semibold rounded-md transition-colors bg-gray-700 hover:bg-yellow-600 active:bg-yellow-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-6a2 2 0 012-2h2a2 2 0 012 2v6m-6 0h6"/></svg>–ó–≤—ñ—Ç–∏
                    </button>
                    <button data-target="orgchartPage" class="nav-btn w-full px-4 py-3 text-gray-300 font-semibold rounded-md transition-colors bg-gray-700 hover:bg-indigo-600 active:bg-indigo-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg>–û—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                    </button>
                    <button data-target="salesAssistantPage" class="nav-btn w-full px-4 py-3 text-gray-300 font-semibold rounded-md transition-colors bg-gray-700 hover:bg-orange-600 active:bg-orange-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-6a2 2 0 012-2h2a2 2 0 012 2v6m-6 0h6"/></svg>–ü–æ–º—ñ—á–Ω–∏–∫ –ø—Ä–æ–¥–∞–∂—É
                    </button>
                    <button data-target="forecastingPage" class="nav-btn w-full px-4 py-3 text-gray-300 font-semibold rounded-md transition-colors bg-gray-700 hover:bg-purple-600 active:bg-purple-600 flex items-center gap-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 012-2h2a2 2 0 012 2v6m-6 0h6"/></svg>–ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è
                    </button>
                </nav>
            </div>
        </div>
        
        <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –º–µ–Ω—é -->
        <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

        <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –°–¢–†–ê–ù–ò–¶ -->
        <div id="page-container" class="relative">
            <div id="appPage" class="page-transition">
                <div class="w-full bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6">
                    <div class="flex flex-col xl:flex-row justify-between items-center mb-4 gap-4">
                        <h1 class="text-2xl font-bold text-white">–¢–∞–±–µ–ª—å</h1>
                        <div class="flex flex-wrap items-center justify-center gap-4">
                            <button id="prevMonth" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üê</button>
                            <div id="currentMonthDisplay" class="text-xl font-semibold text-gray-300 w-48 text-center"></div>
                            <button id="nextMonth" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üí</button>
                        </div>
                        <div class="flex items-center gap-4 bg-gray-900 px-4 py-2 rounded-lg">
                            <div id="globalNormContainer" class="flex items-center gap-2">
                                <label for="workNorm" class="text-gray-400">–ó–∞–≥–∞–ª—å–Ω–∞ –Ω–æ—Ä–º–∞ –¥–Ω—ñ–≤:</label>
                                <input type="number" id="workNorm" value="21" class="dark-input w-20 p-2 text-center">
                            </div>
                            <div class="toggle-container">
                                <span id="normTypeTextGlobal" class="font-semibold text-white">–ó–∞–≥–∞–ª—å–Ω–∞</span>
                                <label class="toggle-label">
                                    <input type="checkbox" id="normTypeToggle">
                                    <span class="slider"></span>
                                </label>
                                <span id="normTypeTextSchedule" class="text-gray-400">–ó–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º</span>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-900 rounded-lg items-end">
                        <div><label for="departmentFilter" class="block text-sm font-medium text-gray-400">–§—ñ–ª—å—Ç—Ä –ø–æ –≤—ñ–¥–¥—ñ–ª—É</label><select id="departmentFilter" class="dark-input mt-1 block w-full p-2"></select></div>
                        <div><label for="employeeFilter" class="block text-sm font-medium text-gray-400">–§—ñ–ª—å—Ç—Ä –ø–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—É</label><input type="text" id="employeeFilter" list="employeeDatalist" class="dark-input mt-1 block w-full p-2" placeholder="–ü–æ—á–Ω—ñ—Ç—å –≤–≤–æ–¥–∏—Ç–∏ —ñ–º'—è..."><datalist id="employeeDatalist"></datalist></div>
                        <div class="flex items-center"><input type="checkbox" id="showArchived" class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-indigo-600 focus:ring-indigo-500"><label for="showArchived" class="ml-2 block text-sm text-gray-300">–ü–æ–∫–∞–∑–∞—Ç–∏ –∞—Ä—Ö—ñ–≤–Ω–∏—Ö</label></div>
                        <div><button id="resetFilters" class="w-full p-2 bg-gray-600 text-white font-semibold rounded-md hover:bg-gray-500">–°–∫–∏–Ω—É—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button></div>
                    </div>
                    <div class="table-container">
                        <table id="timesheetTable" class="w-full">
                            <thead></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="mt-6 flex flex-wrap justify-between items-center gap-4">
                        <button id="openExportModalBtn" class="bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 flex items-center gap-2 transition-colors">–ï–∫—Å–ø–æ—Ä—Ç</button>
                        <button id="clearMonthData" class="bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-600">–û—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞–±–µ–ª—å –∑–∞ –º—ñ—Å—è—Ü—å</button>
                    </div>
                </div>
            </div>
            <div id="massSalaryPage" class="page-transition">
                <div class="w-full bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-gray-900 rounded-lg items-end">
                        <div class="flex items-center gap-4"> 
                            <button id="massSalaryPrevMonth" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üê</button> 
                            <div id="massSalaryCurrentMonth" class="text-lg font-semibold text-gray-300 w-48 text-center"></div> 
                            <button id="massSalaryNextMonth" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üí</button>
                        </div>
                        <div>
                            <label for="massSalaryDepartmentFilter" class="block text-sm font-medium text-gray-400">–§—ñ–ª—å—Ç—Ä –ø–æ –≤—ñ–¥–¥—ñ–ª—É</label>
                            <select id="massSalaryDepartmentFilter" class="dark-input mt-1 block w-full p-2"><option value="">–í—Å—ñ –≤—ñ–¥–¥—ñ–ª–∏</option></select>
                        </div>
                        <div>
                            <button id="generateMassSalaryTableBtn" class="w-full p-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700">–°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ —Ç–∞–±–ª–∏—Ü—é</button>
                        </div>
                    </div>
                    <div id="massSalaryTableContainer" class="space-y-8"></div>
                    <div id="massSalaryFooterActions" class="hidden mt-8 pt-4 border-t border-gray-700 flex justify-end gap-4">
                        <button id="calculateAllSalariesBtn" class="px-6 py-2 bg-teal-600 text-white font-semibold rounded-md hover:bg-teal-700">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤—Å–µ</button>
                        <button id="saveMassSalaryBtn" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700">–ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫</button>
                        <button id="exportAllSalariesBtn" class="px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700">–ï–∫—Å–ø–æ—Ä—Ç –≤ Excel</button>
                    </div>
                </div>
            </div>
            <div id="salaryPage" class="page-transition">
                <div class="w-full bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6">
                    <div id="kpiSalaryContent" class="max-h-[80vh] flex flex-col">
                        <div class="mb-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                            <div class="flex items-center gap-4"> 
                                <button id="kpiPrevMonthSalary" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üê</button> 
                                <div id="kpiCurrentMonthSalary" class="text-lg font-semibold text-gray-300 w-48 text-center"></div> 
                                <button id="kpiNextMonthSalary" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üí</button>
                            </div>
                            <div>
                                <label for="kpiEmployeeSelectSalary" class="block text-sm font-medium text-gray-400">–û–±–µ—Ä—ñ—Ç—å —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞:</label>
                                <select id="kpiEmployeeSelectSalary" class="dark-input mt-1 block w-full p-2"><option value="">-- –û–±–µ—Ä—ñ—Ç—å —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ --</option></select>
                            </div>
                        </div>
                        <div id="kpiSalaryDetails" class="hidden overflow-y-auto flex-grow">
                            <div class="mb-4">
                                <button id="loadKpiActualsBtn" class="w-full p-2 text-sm bg-blue-800 text-blue-200 rounded-md hover:bg-blue-700">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ KPI –¥–∞–Ω—ñ</button>
                            </div>
                            <div id="salaryCalculationForm" class="space-y-6 pr-2">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div class="p-4 border border-gray-700 rounded-lg space-y-4">
                                        <h4 class="font-semibold">–î–∞–Ω—ñ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ó–ü</h4>
                                        <div><label class="block text-sm">–ë–∞–∑–æ–≤–∞ —Å—Ç–∞–≤–∫–∞ (–ó–ü), –≥—Ä–Ω</label><input type="number" id="kpiSalaryBaseSalary" class="kpi-input" placeholder="8000" disabled></div>
                                        <div><label class="block text-sm mt-4">–ë–∞–∑–∞ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø—Ä–µ–º—ñ—ó, –≥—Ä–Ω</label><input type="number" id="kpiSalaryPremiumBase" class="kpi-input" placeholder="18000" disabled></div>
                                        <div id="kpiSalaryCategoriesContainer"><h5 class="font-semibold mt-4">–í–∏–∫–æ–Ω–∞–Ω–Ω—è KPI</h5></div>
                                        <div id="kpiSalaryFocusTasksContainer"><h5 class="font-semibold mt-4">–§–æ–∫—É—Å–Ω—ñ –∑–∞–¥–∞—á—ñ</h5><input type="number" id="kpiSalaryFocusTasks" class="kpi-input" placeholder="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö –∑–∞–¥–∞—á"></div>
                                        <div id="kpiSalaryBonusesContainer"><h5 class="font-semibold mt-4">–î–æ–¥–∞—Ç–∫–æ–≤—ñ –±–æ–Ω—É—Å–∏</h5></div>
                                        <div><label class="block text-sm">–°—É–º–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤, –≥—Ä–Ω</label><input type="number" id="kpiSalaryTaxes" class="kpi-input" placeholder="4600"></div>
                                    </div>
                                    <div class="p-4 border border-gray-700 rounded-lg space-y-4">
                                        <h4 class="font-semibold">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É</h4>
                                        <p class="text-lg">–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <span id="calculatedTotalSalary" class="font-bold text-green-400">0.00</span> –≥—Ä–Ω</p>
                                        <button id="calculateSalaryBtn" class="w-full p-2 bg-teal-600 text-white rounded-md shadow-sm hover:bg-teal-700">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –ó–ü</button>
                                        <button id="saveKpiActualsBtn" class="w-full p-2 bg-indigo-600 text-white rounded-md shadow-sm hover:bg-indigo-700 mt-2">–ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Ç–æ—á–Ω—ñ –¥–∞–Ω—ñ KPI</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- –°–¢–û–†–Ü–ù–ö–ê –í–Ü–î–ü–£–°–¢–û–ö -->
            <div id="vacationsPage" class="page-transition">
                <div class="w-full bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6">
                    <div class="mb-6 border-b border-gray-700">
                        <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                            <button id="vacationTabMyRequests" type="button" class="report-tab active-tab group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m0 0a8.485 8.485 0 0011.026 0M12 17.747a8.485 8.485 0 01-11.026 0M12 6.253a8.485 8.485 0 0111.026 0M12 6.253L12 3m0 3.253L6 3m6 3.253l6-3.253M12 21v-2.253"></path></svg>
                                –ú–æ—ó –∑–∞—è–≤–∫–∏
                            </button>
                            <button id="vacationTabManageRequests" type="button" class="report-tab group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm hidden">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" /></svg>
                                –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç–∞–º–∏
                            </button>
                        </nav>
                    </div>

                    <div id="vacationPanelMyRequests" class="report-tab-panel active">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-white">–ú–æ—ó –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ñ–¥–ø—É—Å—Ç–∫—É</h2>
                            <button id="createVacationRequestBtn" class="px-4 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–ø–∏—Ç</button>
                        </div>
                        <div id="myVacationRequestsList" class="space-y-3">
                            <!-- Placeholder, actual list items will be generated by JS -->
                            <p class="text-gray-400">–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ñ–¥–ø—É—Å—Ç–∫—É.</p>
                        </div>
                    </div>

                    <div id="vacationPanelManageRequests" class="report-tab-panel">
                         <h2 class="text-xl font-bold text-white mb-4">–ó–∞–ø–∏—Ç–∏ –Ω–∞ –≤—ñ–¥–ø—É—Å—Ç–∫—É –¥–ª—è –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è</h2>
                         <!-- Add filters here later if needed -->
                         <div id="manageVacationRequestsList" class="space-y-3">
                            <!-- Placeholder -->
                            <p class="text-gray-400">–ù–µ–º–∞—î –∑–∞–ø–∏—Ç—ñ–≤, —â–æ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Ä–æ–∑–≥–ª—è–¥—É.</p>
                         </div>
                    </div>
                </div>
            </div>
            <!-- –°–¢–û–†–Ü–ù–ö–ê –ó–í–Ü–¢–Ü–í -->
            <div id="reportsPage" class="page-transition">
                <div class="w-full bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6">
                    <div class="mb-6 border-b border-gray-700">
                        <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                            <button id="reportTabMonthlyDynamics" type="button" class="report-tab active-tab group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm">–î–∏–Ω–∞–º—ñ–∫–∞ –ø–æ –ú—ñ—Å—è—Ü—è—Ö</button>
                            <button id="reportTabDepartment" type="button" class="report-tab group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm">–ó–≤—ñ—Ç –ø–æ –í—ñ–¥–¥—ñ–ª—É</button>
                            <button id="reportTabBonuses" type="button" class="report-tab group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm">–ó–≤—ñ—Ç –ø–æ –ë–æ–Ω—É—Å–∞—Ö</button>
                            <button id="reportTabComparison" type="button" class="report-tab group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm">–ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∏–π –ó–≤—ñ—Ç</button>
                        </nav>
                    </div>

                    <!-- –í–∫–ª–∞–¥–∫–∞: –î–∏–Ω–∞–º—ñ–∫–∞ –ø–æ –º—ñ—Å—è—Ü—è—Ö -->
                    <div id="reportTabPanelMonthlyDynamics" class="report-tab-panel active">
                      <button id="openAddSalesModalBtn" class="mb-4 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded">–î–æ–¥–∞—Ç–∏ –ø—Ä–æ–¥–∞–∂—ñ</button>
                      <div class="mb-6">
                          <label for="reportDepartmentFilter" class="block text-sm font-medium text-gray-400">–§—ñ–ª—å—Ç—Ä –ø–æ –≤—ñ–¥–¥—ñ–ª—É:</label>
                          <select id="reportDepartmentFilter" class="dark-input mt-1 block w-full md:w-1/3 p-2">
                              <option value="all">–í—Å—ñ –≤—ñ–¥–¥—ñ–ª–∏</option>
                          </select>
                      </div>
                      <div class="mb-8">
                          <h2 class="text-2xl font-bold text-white">–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –¥–∏–Ω–∞–º—ñ–∫–∏ –ø–æ –º—ñ—Å—è—Ü—è—Ö</h2>
                          <p class="text-sm text-gray-400 mt-1 max-w-3xl">–ê–Ω–∞–ª—ñ–∑ –∑–º—ñ–Ω–∏ —Ñ–æ–Ω–¥—É –æ–ø–ª–∞—Ç–∏ –ø—Ä–∞—Ü—ñ (–§–û–ü) —Ç–∞ –∑–∞–≥–∞–ª—å–Ω–æ—ó —Å—É–º–∏ –ø—Ä–æ–¥–∞–∂—ñ–≤.</p>
                      </div>
                      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                          <div class="bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-600">
                              <h3 class="text-lg font-semibold text-white mb-4">–î–∏–Ω–∞–º—ñ–∫–∞ –§–æ–Ω–¥—É –û–ø–ª–∞—Ç–∏ –ü—Ä–∞—Ü—ñ (–§–û–ü)</h3>
                              <div class="report-chart-container">
                                  <canvas id="salaryDynamicsChart"></canvas>
                              </div>
                          </div>
                          <div class="bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-600">
                               <h3 class="text-lg font-semibold text-white mb-4">–î–∏–Ω–∞–º—ñ–∫–∞ –°—É–º–∏ –ü—Ä–æ–¥–∞–∂—ñ–≤ (–¥–µ–º–æ)</h3>
                              <div class="report-chart-container">
                                  <canvas id="salesDynamicsChart"></canvas>
                              </div>
                          </div>
                      </div>
                      <div>
                           <h3 class="text-lg font-semibold text-white mb-4">–î–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –ø–æ –º—ñ—Å—è—Ü—è—Ö</h3>
                           <div class="overflow-x-auto bg-gray-700 rounded-lg shadow border border-gray-600">
                               <table class="min-w-full divide-y divide-gray-600">
                                  <thead class="bg-gray-750">
                                      <tr>
                                          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">–ú—ñ—Å—è—Ü—å</th>
                                          <th class="px-6 py-3 text-right text-xs font-semibold text-gray-300 uppercase tracking-wider">–ó–∞–≥–∞–ª—å–Ω–∏–π –§–û–ü</th>
                                          <th class="px-6 py-3 text-right text-xs font-semibold text-gray-300 uppercase tracking-wider">–°—É–º–∞ –ø—Ä–æ–¥–∞–∂—ñ–≤ (–¥–µ–º–æ)</th>
                                          <th class="px-6 py-3 text-right text-xs font-semibold text-gray-300 uppercase tracking-wider">–°–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è (–ó–ü / –ü—Ä–æ–¥–∞–∂—ñ)</th>
                                      </tr>
                                  </thead>
                                  <tbody id="details-table-body" class="bg-gray-700 divide-y divide-gray-600"></tbody>
                               </table>
                           </div>
                      </div>
                    </div>
                    <!-- –í–∫–ª–∞–¥–∫–∞: –ó–≤—ñ—Ç –ø–æ –≤—ñ–¥–¥—ñ–ª—É -->
                    <div id="reportTabPanelDepartment" class="report-tab-panel">
                      <h2 class="text-2xl font-bold text-white mb-4">–ó–≤—ñ—Ç –ø–æ –í—ñ–¥–¥—ñ–ª—É</h2>
                      <div id="departmentReportContainer"></div>
                    </div>
                    <!-- –í–∫–ª–∞–¥–∫–∞: –ó–≤—ñ—Ç –ø–æ –±–æ–Ω—É—Å–∞—Ö -->
                    <div id="reportTabPanelBonuses" class="report-tab-panel">
                      <h2 class="text-2xl font-bold text-white mb-4">–ó–≤—ñ—Ç –ø–æ –ë–æ–Ω—É—Å–∞—Ö</h2>
                      <div id="bonusesReportContainer"></div>
                    </div>
                    <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∏–π –∑–≤—ñ—Ç -->
                    <div id="reportTabPanelComparison" class="report-tab-panel">
                      <h2 class="text-2xl font-bold text-white mb-4">–ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∏–π –ó–≤—ñ—Ç</h2>
                      <div id="comparisonReportContainer"></div>
                    </div>
                </div>
            </div>
            

            
            <!-- –ü–æ–º—ñ—á–Ω–∏–∫ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è -->
            <!-- This block is removed to avoid duplicate IDs with the modal version below -->
            
            <!-- After all other tab-panel -->
            <div id="orgchartPage" class="page-transition hidden">
              <div class="w-full bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6">
                <div id="org-chart-container" style="height: 80vh;"></div>
              </div>
            </div>
            <div id="focusPage" class="page-transition hidden">
                <div class="w-full bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6">
                    <h1 class="text-3xl font-bold text-white mb-4">–§–æ–∫—É—Å</h1>
                    <div id="focus-tasks-list" class="mb-6"></div>
                    <button id="createFocusTaskBtn" class="px-6 py-2 bg-orange-600 text-white font-semibold rounded-md hover:bg-orange-700 mb-4 hidden">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –∑–∞–¥–∞—á—É</button>
                    <div id="focus-task-details"></div>
              </div>
            </div>
            
            <div id="salesAssistantPage" class="page-transition hidden w-full flex flex-col gap-4 py-4"></div>
            <div id="forecastingPage" class="page-transition hidden w-full max-w-7xl flex flex-col gap-8 py-8 mx-auto"></div>
        </div>
    </div>
    
    <!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê -->
    <div id="loading" class="loading-overlay hidden z-50"><div><div class="loader mx-auto"></div><p class="mt-4 text-white font-semibold">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</p></div></div>
    <div id="confirmationModal" class="modal-overlay modal-overlay-fade hidden z-40"><div class="relative p-5 border border-gray-700 w-full max-w-sm shadow-lg rounded-md bg-gray-800 modal-content-flip"><h3 id="confirmationMessage" class="text-lg font-medium text-white mb-4"></h3><div class="items-center mt-4 px-4 py-3 gap-2 flex"><button id="confirmYesBtn" class="w-full px-4 py-2 bg-red-600 text-white rounded-md shadow-sm hover:bg-red-700">–¢–∞–∫</button><button id="confirmNoBtn" class="w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ù—ñ</button></div></div></div>
    
    <div id="employeeManagerModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-6xl shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip"><span class="modal-close-btn">√ó</span><div class="flex justify-between items-center mb-4"><h3 class="text-lg leading-6 font-medium text-white">–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏</h3><button id="openAddEmployeeModalBtn" class="px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ</button></div><div id="employeesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 overflow-y-auto flex-grow p-4"></div><button class="cancel-btn mt-6 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div>
    <div id="departmentManagerModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-3xl shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip"><span class="modal-close-btn">√ó</span><div class="flex justify-between items-center mb-4"><h3 class="text-lg leading-6 font-medium text-white">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –≤—ñ–¥–¥—ñ–ª–∞–º–∏</h3><button id="openAddDepartmentModalBtn" class="px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ</button></div><div id="departmentsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto flex-grow p-1 -mx-1"></div><button class="cancel-btn mt-6 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div>
    <div id="positionManagerModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-3xl shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip"><span class="modal-close-btn">√ó</span><div class="flex justify-between items-center mb-4"><h3 class="text-lg leading-6 font-medium text-white">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Å–∞–¥–∞–º–∏</h3><button id="openAddPositionModalBtn" class="px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É</button></div><div id="positionsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto flex-grow p-1 -mx-1"></div><button class="cancel-btn mt-6 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div>
    <div id="cellEditorModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-5 border border-gray-700 w-full max-w-md shadow-lg rounded-md bg-gray-800 modal-content-flip"><span class="modal-close-btn">√ó</span><h3 id="cellEditorTitle" class="text-lg leading-6 font-medium text-white mb-4">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –¥–µ–Ω—å</h3><div class="cell-editor-loader" style="display:none;text-align:center;padding:2em 0"><div class="loader mx-auto"></div><p class="mt-2 text-white font-semibold">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p></div><div class="cell-editor-content"><div class="space-y-4"><div><h4 class="font-semibold text-left mb-2 text-white">–ü–ª–∞–Ω:</h4><div id="planStatusButtons" class="flex justify-center gap-2"></div></div><div><h4 class="font-semibold text-left mb-2 text-white">–§–∞–∫—Ç:</h4><div id="factStatusButtons" class="flex justify-center gap-2"></div></div></div><button id="clearCellDataBtn" class="mt-6 w-full px-4 py-2 bg-red-600 text-white rounded-md shadow-sm hover:bg-red-700">–û—á–∏—Å—Ç–∏—Ç–∏</button><button class="cancel-btn mt-2 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div></div>
    <div id="exportModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-lg shadow-lg rounded-md bg-gray-800 modal-content-flip"><span class="modal-close-btn">√ó</span><h3 class="text-lg leading-6 font-medium text-white mb-4">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É</h3><div class="space-y-4"><div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="dateFrom" class="block text-sm font-medium text-gray-400 text-left">–ü–µ—Ä—ñ–æ–¥ –∑:</label><input type="date" id="dateFrom" class="dark-input mt-1 block w-full p-2"></div><div><label for="dateTo" class="block text-sm font-medium text-gray-400 text-left">–ü–µ—Ä—ñ–æ–¥ –ø–æ:</label><input type="date" id="dateTo" class="dark-input mt-1 block w-full p-2"></div></div><div><label for="exportDepartmentFilter" class="block text-sm font-medium text-gray-400 text-left">–í—ñ–¥–¥—ñ–ª:</label><select id="exportDepartmentFilter" class="dark-input mt-1 block w-full p-2"><option value="">–í—Å—ñ –≤—ñ–¥–¥—ñ–ª–∏</option></select></div><div><label for="exportEmployeeFilter" class="block text-sm font-medium text-gray-400 text-left">–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫:</label><select id="exportEmployeeFilter" class="dark-input mt-1 block w-full p-2"><option value="">–í—Å—ñ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∏</option></select></div></div><div class="items-center mt-6 px-4 py-3 gap-2 flex"><button id="generateExportBtn" class="w-full px-4 py-2 bg-teal-600 text-white rounded-md shadow-sm hover:bg-teal-700">–ï–∫—Å–ø–æ—Ä—Ç –≤ Excel</button><button class="cancel-btn w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–°–∫–∞—Å—É–≤–∞—Ç–∏</button></div></div></div>
    <div id="scheduleManagerModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-4xl shadow-lg rounded-md bg-gray-800 modal-content-flip"><span class="modal-close-btn">√ó</span><h3 class="text-lg leading-6 font-medium text-white mb-4">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞–º–∏ —Ä–æ–±–æ—Ç–∏</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="p-4 border border-gray-700 rounded-lg"> <h4 class="font-semibold mb-3">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫</h4> <input type="text" id="scheduleName" placeholder="–ù–∞–∑–≤–∞ –≥—Ä–∞—Ñ—ñ–∫–∞ (–Ω–∞–ø—Ä. 5-–¥–µ–Ω–∫–∞)" class="dark-input w-full p-2 mb-3"> <div id="weekdays" class="flex flex-wrap gap-2 justify-center mb-3"></div> <button id="saveScheduleBtn" class="w-full p-2 bg-blue-600 text-white rounded-md">–ó–±–µ—Ä–µ–≥—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫</button></div><div class="p-4 border border-gray-700 rounded-lg"><h4 class="font-semibold mb-3">–Ü—Å–Ω—É—é—á—ñ –≥—Ä–∞—Ñ—ñ–∫–∏</h4><div id="schedulesGrid" class="grid grid-cols-1 gap-2 overflow-y-auto max-h-60 p-1 -mx-1"></div></div></div><button class="cancel-btn mt-6 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div>
    <div id="rolesManagerModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-6xl shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip"><span class="modal-close-btn">√ó</span><h3 class="text-lg leading-6 font-medium text-white mb-4">–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–ª—è–º–∏ –¥–æ—Å—Ç—É–ø—É</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-6 flex-grow overflow-y-auto"><div class="col-span-1 border-r border-gray-700 pr-4"><h4 class="font-semibold mb-3">–†–æ–ª—ñ</h4><div id="rolesList" class="space-y-2"></div><button id="addNewRoleBtn" class="mt-4 w-full p-2 bg-green-600 text-white rounded-md hover:bg-green-700">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Ä–æ–ª—å</button></div><div id="roleEditor" class="col-span-2 hidden"><h4 class="font-semibold mb-3">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–ª—ñ "<span id="editingRoleName"></span>"</h4><div class="mb-4"><label for="roleNameInput" class="block text-sm font-medium text-gray-400">–ù–∞–∑–≤–∞ —Ä–æ–ª—ñ</label><input type="text" id="roleNameInput" class="dark-input mt-1"></div><div class="space-y-3"><h5 class="font-medium text-gray-300">–î–æ–∑–≤–æ–ª–∏:</h5><div id="permissionsList"></div></div><div class="mt-6 flex gap-4"><button id="saveRoleBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button><button id="deleteRoleBtn" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">–í–∏–¥–∞–ª–∏—Ç–∏ —Ä–æ–ª—å</button></div></div></div><button class="cancel-btn mt-6 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div>
    <div id="userAccessModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-4xl shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip"><span class="modal-close-btn">√ó</span><h3 class="text-lg leading-6 font-medium text-white mb-4">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –∫–æ–º–ø–∞–Ω—ñ—ó</h3><div class="flex-grow overflow-y-auto mb-6 pr-2"><h4 class="font-semibold mb-3 text-gray-300">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑ –¥–æ—Å—Ç—É–ø–æ–º</h4><div id="userList" class="space-y-3"></div></div>
        <div id="addUserSection" class="mt-auto pt-4 border-t border-gray-700">
            <h4 class="font-semibold mb-3 text-gray-300">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h4>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                <div class="sm:col-span-1">
                    <label for="newUserEmail" class="block text-sm font-medium text-gray-400 mb-1">Email –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</label>
                    <input type="email" id="newUserEmail" placeholder="user@example.com" class="dark-input">
                </div>
                <div class="sm:col-span-1">
                    <label for="newUserPassword" class="block text-sm font-medium text-gray-400 mb-1">–ü–∞—Ä–æ–ª—å (–º—ñ–Ω. 6 —Å–∏–º–≤–æ–ª—ñ–≤)</label>
                    <input type="password" id="newUserPassword" placeholder="–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø–∞—Ä–æ–ª—å" class="dark-input">
                </div>
                <div class="lg:col-span-1">
                    <label for="linkEmployeeSelect" class="block text-sm font-medium text-gray-400 mb-1">–ü—Ä–∏–≤'—è–∑–∞—Ç–∏ –¥–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞</label>
                    <select id="linkEmployeeSelect" class="dark-input p-2 h-[42px]"></select>
                </div>
                <div class="sm:col-span-1">
                    <label for="newUserRole" class="block text-sm font-medium text-gray-400 mb-1">–†–æ–ª—å</label>
                    <select id="newUserRole" class="dark-input p-2 h-[42px]"></select>
                </div>
            </div>
             <button id="addUserBtn" class="mt-4 w-full sm:w-auto px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 whitespace-nowrap h-[42px]">–î–æ–¥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
            <p id="addUserError" class="text-red-400 text-sm mt-2 h-4"></p>
        </div>
        
        <!-- –ù–æ–≤–∞ —Å–µ–∫—Ü—ñ—è –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø—Ä–∞–≤ –≤–ª–∞—Å–Ω–∏–∫–∞ -->
        <div id="copyOwnerPermissionsSection" class="mt-6 pt-4 border-t border-gray-700">
            <h4 class="font-semibold mb-3 text-gray-300">–ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø—Ä–∞–≤ —Ä–æ–ª—ñ –¥–ª—è –≤–ª–∞—Å–Ω–∏–∫–∞</h4>
            <p class="text-sm text-gray-400 mb-4">–û–±–µ—Ä—ñ—Ç—å —Ä–æ–ª—å, –ø—Ä–∞–≤–∞ —è–∫–æ—ó –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –¥–ª—è –≤–ª–∞—Å–Ω–∏–∫–∞:</p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 items-end">
                <div class="sm:col-span-1">
                    <label for="copyPermissionsRoleSelect" class="block text-sm font-medium text-gray-400 mb-1">–†–æ–ª—å</label>
                    <select id="copyPermissionsRoleSelect" class="dark-input p-2 h-[42px]">
                        <option value="">-- –û–±–µ—Ä—ñ—Ç—å —Ä–æ–ª—å --</option>
                    </select>
                </div>
                <div class="sm:col-span-1">
                    <button id="copyOwnerPermissionsBtn" class="w-full px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 h-[42px] disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –ø—Ä–∞–≤–∞ —Ä–æ–ª—ñ –¥–ª—è –≤–ª–∞—Å–Ω–∏–∫–∞
                    </button>
                </div>
                <div class="sm:col-span-1">
                    <p id="copyPermissionsStatus" class="text-sm text-gray-400 h-[42px] flex items-center"></p>
                </div>
            </div>
            
            <!-- –°–µ–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–∞–≤ –æ–±—Ä–∞–Ω–æ—ó —Ä–æ–ª—ñ -->
            <div id="selectedRolePermissionsInfo" class="mt-4 p-3 bg-gray-700 rounded-md hidden">
                <h5 class="text-sm font-medium text-gray-300 mb-2">–ü—Ä–∞–≤–∞ –æ–±—Ä–∞–Ω–æ—ó —Ä–æ–ª—ñ:</h5>
                <div id="selectedRolePermissionsList" class="text-xs text-gray-400 space-y-1 max-h-32 overflow-y-auto"></div>
            </div>
        </div>
        <button class="cancel-btn mt-6 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div>
    <div id="kpiManagerModal" class="modal-overlay modal-overlay-fade hidden z-20"><div class="relative p-6 border border-gray-700 w-full max-w-7xl shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip"><span class="modal-close-btn">√ó</span><h3 class="text-lg leading-6 font-medium text-white mb-4">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä KPI</h3><div class="mb-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-end"><div class="flex items-center gap-4"> <button id="kpiPrevMonth" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üê</button> <div id="kpiCurrentMonth" class="text-lg font-semibold text-gray-300 w-48 text-center"></div> <button id="kpiNextMonth" class="px-3 py-2 bg-gray-700 rounded-md hover:bg-gray-600">‚Üí</button></div><div><label for="kpiPositionSelect" class="block text-sm font-medium text-gray-400">–û–±–µ—Ä—ñ—Ç—å –ø–æ—Å–∞–¥—É:</label><select id="kpiPositionSelect" class="dark-input mt-1 block w-full p-2"></select></div></div><div id="kpiSettingsContainer" class="hidden overflow-y-auto flex-grow"><div id="kpiCopyContainer" class="mb-4"><button id="copyKpiBtn" class="w-full p-2 text-sm bg-blue-800 text-blue-200 rounded-md hover:bg-blue-700">–ö–æ–ø—ñ—é–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –º—ñ—Å—è—Ü—è</button></div><div id="kpiSettingsForm" class="space-y-6 pr-2"><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="p-4 border border-gray-700 rounded-lg space-y-4"><h4 class="font-semibold">–û—Å–Ω–æ–≤–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ó–ü</h4><div><label class="block text-sm">–ë–∞–∑–æ–≤–∞ —Å—Ç–∞–≤–∫–∞ (–ó–ü), –≥—Ä–Ω</label><input type="number" id="kpiBaseSalary" class="kpi-input" placeholder="8000"></div><div><label class="block text-sm mt-4">–ë–∞–∑–∞ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø—Ä–µ–º—ñ—ó, –≥—Ä–Ω</label><input type="number" id="kpiPremiumBase" class="kpi-input" placeholder="18000"></div><div id="kpiCategoriesContainer"><h5 class="font-medium mt-4">–í–∞–≥–∞ KPI, % <span id="kpiWeightSum" class="ml-2 font-normal text-sm"></span></h5></div><button id="addKpiCategoryBtn" class="w-full mt-2 text-sm p-2 bg-gray-700 hover:bg-gray-600 rounded-md">–î–æ–¥–∞—Ç–∏ KPI</button></div><div class="p-4 border border-gray-700 rounded-lg space-y-4"><h4 class="font-semibold">–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ —Ñ–æ–∫—É—Å–Ω–∏—Ö –∑–∞–¥–∞—á</h4><div class="grid grid-cols-3 gap-2"><div><label class="block text-sm">0 –∑–∞–¥–∞—á</label><input type="number" step="0.01" id="kpiFocus0" class="kpi-input" placeholder="0.5"></div><div><label class="block text-sm">1 –∑–∞–¥–∞—á–∞</label><input type="number" step="0.01" id="kpiFocus1" class="kpi-input" placeholder="0.75"></div><div><label class="block text-sm">2+ –∑–∞–¥–∞—á—ñ</label><input type="number" step="0.1" id="kpiFocus2" class="kpi-input" placeholder="1.1"></div></div></div></div><div class="p-4 border border-gray-700 rounded-lg space-y-4"><div id="bonusesContainer"><h4 class="font-semibold">–î–æ–¥–∞—Ç–∫–æ–≤—ñ –±–æ–Ω—É—Å–∏</h4></div><button id="addBonusBtn" class="w-full mt-2 text-sm p-2 bg-gray-700 hover:bg-gray-600 rounded-md">–î–æ–¥–∞—Ç–∏ –±–æ–Ω—É—Å</button></div><div class="p-4 border border-gray-700 rounded-lg space-y-4"><h4 class="font-semibold">–ü–æ–¥–∞—Ç–∫–∏</h4><div><label class="block text-sm">–°—É–º–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤, –≥—Ä–Ω</label><input type="number" id="kpiTaxes" class="kpi-input" placeholder="4600"></div></div></div><div id="kpiSaveContainer" class="pt-6 mt-auto"><button id="saveKpiSettingsBtn" class="w-full p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">–ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è KPI</button></div></div></div></div>
    <div id="settingsWindowModal" class="modal-overlay modal-overlay-fade hidden z-20">
        <div id="settingsWindowContent" class="relative p-6 border border-gray-700 w-full max-w-2xl shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip">
            <span id="closeSettingsWindowButton" class="modal-close-btn">√ó</span>
            <h3 class="text-lg leading-6 font-medium text-white mb-4">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–∞–Ω—ñ—ó</h3>
            <div class="overflow-y-auto flex-grow pr-2 space-y-6">
                <div>
                    <h4 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2">–ü–µ—Ä—Å–æ–Ω–∞–ª</h4>
                    <div class="space-y-3">
                        <div class="manager-card-setting-item">
                            <div class="flex items-center gap-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                                <div><h5 class="font-semibold text-white">–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∏</h5><p class="text-sm text-gray-400">–î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤.</p></div>
                            </div>
                            <button class="w-full mt-2 px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm" data-modal-target="employeeManagerModal">–ö–µ—Ä—É–≤–∞—Ç–∏</button>
                        </div>
                        <div class="manager-card-setting-item">
                            <div class="flex items-center gap-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 4h5m-5 4h5m-5-8h5m-5 4h5" /></svg>
                                <div><h5 class="font-semibold text-white">–í—ñ–¥–¥—ñ–ª–∏ —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∏</h5><p class="text-sm text-gray-400">–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–¥—ñ–ª—ñ–≤ —Ç–∞ —Ä–æ–±–æ—á–∏—Ö –≥—Ä–∞—Ñ—ñ–∫—ñ–≤.</p></div>
                            </div>
                            <div class="flex gap-2 mt-2">
                                <button class="w-full px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm" data-modal-target="departmentManagerModal">–í—ñ–¥–¥—ñ–ª–∏</button>
                                <button class="w-full px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm" data-modal-target="scheduleManagerModal" data-init-func="setupScheduleManager">–ì—Ä–∞—Ñ—ñ–∫–∏</button>
                            </div>
                        </div>
                        <div class="manager-card-setting-item">
                            <div class="flex items-center gap-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-4 0h4" /></svg>
                                <div><h5 class="font-semibold text-white">–ü–æ—Å–∞–¥–∏</h5><p class="text-sm text-gray-400">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Å–∞–¥ —É –∫–æ–º–ø–∞–Ω—ñ—ó.</p></div>
                            </div>
                            <button class="w-full mt-2 px-3 py-1 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm" data-modal-target="positionManagerModal">–ö–µ—Ä—É–≤–∞—Ç–∏</button>
                        </div>
                    </div>
                </div>
                <div>
                    <h4 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è</h4>
                    <div class="space-y-3">
                        <div class="manager-card-setting-item">
                            <div class="flex items-center gap-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A10.004 10.004 0 003 21m12 0v-1a6 6 0 00-9-5.197" /></svg>
                                <div><h5 class="font-semibold text-white">–î–æ—Å—Ç—É–ø –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h5><p class="text-sm text-gray-400">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∞–º–∏ —Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.</p></div>
                            </div>
                            <div class="flex gap-2 mt-2">
                                <button class="w-full px-3 py-1 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm" data-modal-target="userAccessModal" data-init-func="setupUserAccessManager">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</button>
                                <button class="w-full px-3 py-1 bg-teal-600 text-white rounded-md hover:bg-teal-700 text-sm" data-modal-target="rolesManagerModal" data-init-func="openRolesManager">–†–æ–ª—ñ</button>
                            </div>
                        </div>
                        <div class="manager-card-setting-item">
                            <div class="flex items-center gap-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>
                                <div><h5 class="font-semibold text-white">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä KPI</h5><p class="text-sm text-gray-400">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —à–∞–±–ª–æ–Ω—ñ–≤ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ó–ü.</p></div>
                            </div>
                            <button class="w-full mt-2 px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm" data-modal-target="kpiManagerModal" data-init-func="openKpiConstructorWrapper">–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                        <div class="manager-card-setting-item hidden" id="recalculateSegmentContainer">
                            <div class="flex items-center gap-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4l2-2h2a2 2 0 012 2z" />
                                </svg>
                                <div>
                                    <h5 class="font-semibold text-white">–°–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—è –∫–ª—ñ—î–Ω—Ç—ñ–≤</h5>
                                    <p class="text-sm text-gray-400">–ó–∞–ø—É—Å–∫ —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–∫—É RFM-—Å–µ–≥–º–µ–Ω—Ç—ñ–≤ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ—ó –±–∞–∑–∏.</p>
                                </div>
                            </div>
                            <button id="recalculateSegmentBtn" class="w-full mt-2 px-3 py-1 bg-cyan-600 text-white rounded-md hover:bg-cyan-700 text-sm">
                                –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å–µ–≥–º–µ–Ω—Ç–∏
                                <span id="recalculateSegmentLoader" class="loader hidden ml-2" style="width: 16px; height: 16px; border-width: 2px;"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <button class="cancel-btn mt-6 w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
    </div>
    <div id="employeeEditorModal" class="modal-overlay modal-overlay-fade hidden z-30"><div class="relative p-5 border border-gray-700 w-full max-w-sm shadow-lg rounded-md bg-gray-800 modal-content-flip"><span class="modal-close-btn">√ó</span><h3 id="employeeEditorTitle" class="text-lg leading-6 font-medium text-white mb-4">–ù–æ–≤–∏–π —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫</h3><div class="flex flex-col items-center mb-4"><img id="employeeAvatarPreview" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 96 96'><rect width='96' height='96' fill='%23666'/><text x='48' y='48' text-anchor='middle' dy='.3em' fill='white' font-size='24'>üë§</text></svg>" class="w-24 h-24 rounded-full object-cover mb-2 border-2 border-gray-600"><input type="file" id="avatarUpload" class="hidden" accept="image/*"><button id="uploadAvatarBtn" class="text-sm text-blue-400 hover:underline">–ó–º—ñ–Ω–∏—Ç–∏ —Ñ–æ—Ç–æ</button></div><div class="text-left space-y-4"><input id="newEmployeeName" type="text" placeholder="–ü–Ü–ë —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none"><div><label for="newEmployeeDeptSelect" class="block text-sm font-medium text-gray-400 text-left mb-1">–í—ñ–¥–¥—ñ–ª</label><select id="newEmployeeDeptSelect" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none"><option value="">-- –û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–¥—ñ–ª --</option></select></div><div><label for="newEmployeePositionSelect" class="block text-sm font-medium text-gray-400 text-left mb-1">–ü–æ—Å–∞–¥–∞</label><select id="newEmployeePositionSelect" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none"><option value="">-- –û–±–µ—Ä—ñ—Ç—å –ø–æ—Å–∞–¥—É --</option></select></div></div><div class="items-center mt-4 px-4 py-3 gap-2 flex"><button id="saveEmployeeBtn" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700">–ó–±–µ—Ä–µ–≥—Ç–∏</button><button class="cancel-btn w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–°–∫–∞—Å—É–≤–∞—Ç–∏</button></div></div></div>
    <div id="departmentEditorModal" class="modal-overlay modal-overlay-fade hidden z-30"><div class="relative p-5 border border-gray-700 w-full max-w-sm shadow-lg rounded-md bg-gray-800 modal-content-flip"><span class="modal-close-btn">√ó</span><h3 id="departmentEditorTitle" class="text-lg leading-6 font-medium text-white mb-4">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤—ñ–¥–¥—ñ–ª</h3><div class="space-y-4"><input id="editDepartmentName" type="text" placeholder="–ù–∞–∑–≤–∞ –≤—ñ–¥–¥—ñ–ª—É" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none"><div><label for="departmentManagerSelect" class="block text-sm font-medium text-gray-400 text-left mb-1">–ö–µ—Ä—ñ–≤–Ω–∏–∫ –≤—ñ–¥–¥—ñ–ª—É</label><select id="departmentManagerSelect" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none"><option value="">-- –ë–µ–∑ –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞ --</option></select></div><div><label for="departmentScheduleSelect" class="block text-sm font-medium text-gray-400 text-left mb-1">–ì—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏</label><select id="departmentScheduleSelect" class="dark-input w-full p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none"><option value="">–ë–µ–∑ –≥—Ä–∞—Ñ—ñ–∫–∞</option></select></div></div><div class="items-center mt-4 px-4 py-3 gap-2 flex"><button id="saveDepartmentBtn" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700">–ó–±–µ—Ä–µ–≥—Ç–∏</button><button class="cancel-btn w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–°–∫–∞—Å—É–≤–∞—Ç–∏</button></div></div></div>
    <div id="positionEditorModal" class="modal-overlay modal-overlay-fade hidden z-30"><div class="relative p-5 border border-gray-700 w-full max-w-sm shadow-lg rounded-md bg-gray-800 modal-content-flip"><span class="modal-close-btn">√ó</span><h3 id="positionEditorTitle" class="text-lg leading-6 font-medium text-white mb-4">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø–æ—Å–∞–¥—É</h3><input id="editPositionName" type="text" placeholder="–ù–∞–∑–≤–∞ –ø–æ—Å–∞–¥–∏" class="dark-input w-full p-3 mb-4 focus:ring-2 focus:ring-indigo-500 focus:outline-none"><div class="items-center mt-4 px-4 py-3 gap-2 flex"><button id="savePositionBtn" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700">–ó–±–µ—Ä–µ–≥—Ç–∏</button><button class="cancel-btn w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–°–∫–∞—Å—É–≤–∞—Ç–∏</button></div></div></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–ø–µ—Ä–µ–≥–ª—è–¥—É –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ñ–¥–ø—É—Å—Ç–∫—É -->
    <div id="vacationRequestModal" class="modal-overlay modal-overlay-fade hidden z-30"><div class="relative p-6 border border-gray-700 w-full max-w-lg shadow-lg rounded-md bg-gray-800 max-h-[90vh] flex flex-col modal-content-flip"><span class="modal-close-btn">√ó</span><h3 id="vacationRequestModalTitle" class="text-lg leading-6 font-medium text-white mb-6">–ó–∞–ø–∏—Ç –Ω–∞ –≤—ñ–¥–ø—É—Å—Ç–∫—É</h3><div class="space-y-4 flex-grow overflow-y-auto pr-2"><div id="vacReqEmployeeSelectContainer" class="hidden"><label for="vacReqEmployeeSelectForManager" class="block text-sm font-medium text-gray-400 mb-1">–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞)</label><select id="vacReqEmployeeSelectForManager" class="dark-input w-full p-2"></select></div><div><label for="vacReqEmployeeName" class="block text-sm font-medium text-gray-400 mb-1">–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫</label><input type="text" id="vacReqEmployeeName" class="dark-input w-full p-2 bg-gray-700" readonly></div><div><label for="vacReqDepartmentName" class="block text-sm font-medium text-gray-400 mb-1">–í—ñ–¥–¥—ñ–ª</label><input type="text" id="vacReqDepartmentName" class="dark-input w-full p-2 bg-gray-700" readonly></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="vacReqStartDate" class="block text-sm font-medium text-gray-400 mb-1">–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É</label><input type="date" id="vacReqStartDate" class="dark-input w-full p-2"></div><div><label for="vacReqEndDate" class="block text-sm font-medium text-gray-400 mb-1">–î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è</label><input type="date" id="vacReqEndDate" class="dark-input w-full p-2"></div></div><div><label for="vacReqComment" class="block text-sm font-medium text-gray-400 mb-1">–ö–æ–º–µ–Ω—Ç–∞—Ä (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)</label><textarea id="vacReqComment" rows="3" class="dark-input w-full p-2" placeholder="–ü—Ä–∏—á–∏–Ω–∞, –ø–æ–±–∞–∂–∞–Ω–Ω—è —Ç–æ—â–æ..."></textarea></div> <div id="vacReqStatusInfo" class="text-sm text-gray-400 hidden">–°—Ç–∞—Ç—É—Å: <span id="vacReqStatusText" class="font-semibold"></span> </div> <div id="vacReqDecisionCommentInfo" class="text-sm text-gray-400 hidden">–ö–æ–º–µ–Ω—Ç–∞—Ä —Ä—ñ—à–µ–Ω–Ω—è: <span id="vacReqDecisionCommentText" class="font-semibold"></span> </div></div><div id="vacationRequestModalActions" class="mt-6 pt-4 border-t border-gray-600 flex flex-wrap justify-end gap-3"><button id="submitVacationRequestBtn" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button><button id="approveVacationRequestBtn" class="px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 hidden">–ü–æ–≥–æ–¥–∏—Ç–∏</button><button id="denyVacationRequestBtn" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 hidden">–í—ñ–¥—Ö–∏–ª–∏—Ç–∏</button><button type="button" class="cancel-btn px-4 py-2 bg-gray-600 text-gray-200 rounded-md hover:bg-gray-500">–°–∫–∞—Å—É–≤–∞—Ç–∏</button></div></div></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –≤—ñ–¥–ø—É—Å—Ç–æ–∫ -->
    <div id="vacationConflictModal" class="modal-overlay modal-overlay-fade hidden z-40"><div class="relative p-5 border border-gray-700 w-full max-w-md shadow-lg rounded-md bg-gray-800 modal-content-flip"><h3 class="text-lg font-medium text-yellow-400 mb-2">–£–≤–∞–≥–∞! –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –≤—ñ–¥–ø—É—Å—Ç–æ–∫!</h3><p id="vacationConflictMessage" class="text-sm text-gray-300 mb-6"></p><div class="items-center mt-4 px-4 py-3 gap-2 flex"><button id="approveAnywayConflictBtn" class="w-full px-4 py-2 bg-yellow-600 text-black rounded-md shadow-sm hover:bg-yellow-500">–í—Å–µ –æ–¥–Ω–æ –ø–æ–≥–æ–¥–∏—Ç–∏</button><button id="cancelConflictBtn" class="w-full px-4 py-2 bg-gray-600 text-gray-200 rounded-md shadow-sm hover:bg-gray-500">–°–∫–∞—Å—É–≤–∞—Ç–∏</button></div></div></div>

    <div id="toast-container" class="z-[60]"></div>

    <script src="js/orgchart.js?v=1754480168831"></script>
    <script type="module" src="js/main.js?v=1754480168831"></script>
    
    <script type="module" src="js/dashboard.js?v=1754480168831"></script>
    <script type="module" src="js/firebase.js?v=1754480168831"></script>
    <script type="module" src="js/focus.js?v=1754480168831"></script>
    <script type="module" src="js/reports.js?v=1754480168831"></script>
    <script type="module" src="js/ui.js?v=1754480168831"></script>
    <script type="module" src="js/salesAssistant.js?v=1754480168831"></script>
    <script type="module" src="js/smartDay.js?v=1754480168831"></script>
    <script type="module" src="js/forecasting.js?v=1754480168831"></script>
    <script type="module" src="js/forecastingAlgorithms.js?v=1754480168831"></script>

    <!-- –í–†–ï–ú–ï–ù–ù–û: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–æ—Ü–µ–Ω–æ–∫ –¥–ª—è –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
    <script>
    window.generateDemoAssessments = async function() {
        const period = '2025Q2'; // –∏–ª–∏ –≤—ã—á–∏—Å–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π
        for (const emp of allEmployees) {
            const assessmentRef = firebase.doc(firebase.db, "companies", currentCompanyId, "competencyAssessments", `${emp.id}_${period}`);
            await firebase.setDoc(assessmentRef, {
                employeeId: emp.id,
                period,
                scores: {
                    '–õ—ñ–¥–µ—Ä—Å—Ç–≤–æ': Math.random() * 2 + 3,
                    '–°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–µ –º–∏—Å–ª–µ–Ω–Ω—è': Math.random() * 2 + 3,
                    '–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è': Math.random() * 2 + 3,
                    '–¢–µ—Ö–Ω—ñ—á–Ω–∞ –µ–∫—Å–ø–µ—Ä—Ç–∏–∑–∞': Math.random() * 2 + 3,
                },
                createdBy: currentUserId,
                createdAt: new Date()
            });
        }
        alert('–î–µ–º–æ-–æ—Ü—ñ–Ω–∫–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ!');
    }
    </script>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –ø—Ä–∏ –≤—ñ–¥—Ö—ñ–ª–µ–Ω–Ω—ñ –∑–∞—è–≤–∫–∏ -->
    <div id="vacationDenyCommentModal" class="modal hidden">
      <div class="modal-content-flip">
        <h2>–í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –∑–∞—è–≤–∫–∏</h2>
        <label for="vacationDenyCommentInput">–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–µ–Ω—Ç–∞—Ä –¥–ª—è –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –∑–∞—è–≤–∫–∏ <span style="color:red">*</span>:</label>
        <textarea id="vacationDenyCommentInput" rows="3" style="width:100%" required></textarea>
        <div class="modal-actions" style="margin-top:1em; display:flex; gap:1em; justify-content:flex-end;">
          <button id="vacationDenyCommentOkBtn" class="btn btn-danger">OK</button>
          <button id="vacationDenyCommentCancelBtn" class="btn btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        </div>
      </div>
    </div>

    <!-- Overlay –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –ø–æ–º—ñ—á–Ω–∏–∫–∞ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è -->
    <div id="growthAssistantOverlay" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center">
      <div id="growthAssistantModal" class="relative bg-gray-800 rounded-2xl shadow-2xl p-8 w-full max-w-md mx-auto animate-fade-in">
        <button id="closeAssistantBtn" class="absolute top-4 right-4 text-gray-500 hover:text-white transition-colors text-2xl">&times;</button>
        <div class="flex items-center gap-4 mb-4">
          <div class="w-16 h-16 flex-shrink-0">
            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path fill="#4F46E5" d="M49.4,-44.6C60.9,-28.9,64.9,-4.5,60.8,16.7C56.7,37.9,44.5,55.9,27.2,64.5C9.9,73.1,-12.4,72.3,-30,62.8C-47.6,53.2,-60.5,34.9,-64.1,14.8C-67.8,-5.3,-62.2,-27.2,-49.5,-43.3C-36.8,-59.4,-18.4,-69.7,1.8,-71.2C22,-72.6,44,-64.6,49.4,-44.6Z" transform="translate(100 100)" /><text x="50%" y="55%" dominant-baseline="middle" text-anchor="middle" fill="white" font-size="100" font-family="Inter, sans-serif" font-weight="bold">A</text></svg>
          </div>
          <div>
            <h4 id="assistantTitle" class="text-xl font-bold text-white">–ü–æ–º—ñ—á–Ω–∏–∫ –ó—Ä–æ—Å—Ç–∞–Ω–Ω—è</h4>
            <p class="text-sm text-gray-400">–ü–æ—Ä–∞–¥–∏ –¥–ª—è —Ä–æ–∑–≤–∏—Ç–∫—É –∫–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ—ó</p>
          </div>
        </div>
        <div id="assistantContent" class="mt-4 pt-4 border-t border-gray-700 text-sm space-y-3 max-h-60 overflow-y-auto pr-2"></div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ–¥–∞–∂—ñ–≤ -->
    <div id="addSalesModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 hidden">
      <div class="bg-gray-800 rounded-xl shadow-lg p-6 w-full max-w-2xl relative">
        <button id="closeAddSalesModal" class="absolute top-2 right-2 text-gray-400 hover:text-white text-2xl">&times;</button>
        <h2 class="text-2xl font-bold text-white mb-4">–î–æ–¥–∞—Ç–∏ –ø—Ä–æ–¥–∞–∂—ñ –ø–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞—Ö</h2>
        <div class="mb-4 flex gap-4 flex-wrap">
          <div>
            <label for="salesMonthSelect" class="block text-sm text-gray-400 mb-1">–ú—ñ—Å—è—Ü—å:</label>
            <input type="month" id="salesMonthSelect" class="dark-input p-2">
          </div>
          <div>
            <label for="salesDepartmentSelect" class="block text-sm text-gray-400 mb-1">–í—ñ–¥–¥—ñ–ª:</label>
            <select id="salesDepartmentSelect" class="dark-input p-2"></select>
          </div>
        </div>
        <div class="overflow-x-auto mb-4">
          <table class="min-w-full text-sm text-left border border-gray-700 rounded-lg">
            <thead>
              <tr class="bg-gray-700 text-gray-300">
                <th class="py-2 px-2">–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫</th>
                <th class="py-2 px-2">–°—É–º–∞ –ø—Ä–æ–¥–∞–∂—ñ–≤, –≥—Ä–Ω</th>
              </tr>
            </thead>
            <tbody id="salesEmployeesTableBody">
              <!-- –î–∏–Ω–∞–º—ñ—á–Ω–æ -->
            </tbody>
          </table>
        </div>
        <div class="flex justify-end gap-4">
          <button id="saveSalesBtn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        </div>
      </div>
    </div>
    <!-- –ö–Ω–æ–ø–∫–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –Ω–∞ –≤–∫–ª–∞–¥—Ü—ñ –ó–≤—ñ—Ç–∏ -->
 

</body>
</html>